{"version":3,"sources":["webpack:///./src/pages/workshops.js","webpack:///./node_modules/unfetch/dist/unfetch.mjs","webpack:///./node_modules/core-js/modules/es6.array.sort.js","webpack:///./node_modules/core-js/modules/_strict-method.js","webpack:///./node_modules/isomorphic-unfetch/browser.js","webpack:///./src/components/RegisterButton/index.js","webpack:///./src/components/WorkshopList/index.js"],"names":["__webpack_require__","r","__webpack_exports__","d","query","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","_components_Layout_index__WEBPACK_IMPORTED_MODULE_1__","_workshops_module_scss__WEBPACK_IMPORTED_MODULE_2__","_workshops_module_scss__WEBPACK_IMPORTED_MODULE_2___default","_components_SocialMeta_index__WEBPACK_IMPORTED_MODULE_3__","_components_WorkshopList__WEBPACK_IMPORTED_MODULE_4__","Workshops","props","a","createElement","image","className","styles","workshops","typo","href","data","e","Promise","t","s","XMLHttpRequest","o","open","method","headers","setRequestHeader","u","getAllResponseHeaders","replace","push","toLowerCase","ok","status","statusText","url","responseURL","clone","text","resolve","responseText","json","then","JSON","parse","blob","Blob","response","keys","entries","get","has","withCredentials","credentials","onload","onerror","send","body","$export","aFunction","toObject","fails","$sort","sort","test","P","F","undefined","comparefn","call","this","module","exports","arg","window","fetch","default","_Button__WEBPACK_IMPORTED_MODULE_1__","_registerbutton_module_scss__WEBPACK_IMPORTED_MODULE_2__","_registerbutton_module_scss__WEBPACK_IMPORTED_MODULE_2___default","_ref","id","_ref$disabled","disabled","block","fill","color","ticket_button","filterWorkshops","node","parent","sourceInstanceName","sortWorkshops","prev","next","prevDate","Date","frontmatter","date","nextDate","WorkshopList","_useState","useState","seats","setSeats","useEffect","Object","length","resp","catch","console","error","react__WEBPACK_IMPORTED_MODULE_6___default","workshop_list","allMdx","edges","filter","map","_ref2","key","workshop_list_item","workshop_title","gatsby__WEBPACK_IMPORTED_MODULE_7__","to","name","title","company","workshop_date","workshop_date_day","workshop_date_month","seats_count","workshop_id","taken","workshop_lead","short_description","workshop_link","workshop_register","_RegisterButton__WEBPACK_IMPORTED_MODULE_9__"],"mappings":"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","file":"component---src-pages-workshops-js-49b0f8ec4652518187f5.js","sourcesContent":["import React from 'react'\nimport Layout from '../components/Layout/index'\nimport styles from './workshops.module.scss'\nimport SocialMeta from '../components/SocialMeta/index'\n\nimport WorkshopList from '../components/WorkshopList'\n\nconst Workshops = props => (\n  <Layout>\n    <SocialMeta image=\"social_card_workshops.jpg\" />\n    <div className={styles.workshops}>\n      <h1 className={styles.typo}>Workshops</h1>\n\n      <p className={styles.typo}>\n        <strong>\n          These workshops are FREE for every ticket holder of JSConf Budapest or\n          a Combo ticket with CSSConf Budapest.\n        </strong>\n      </p>\n\n      <p className={styles.typo}>\n        The workshops have limited seats, so be sure to{' '}\n        <a href=\"https://ti.to/jsconf-bp/jsconf-budapest-2019\">\n          get your ticket\n        </a>\n        before they fill up! We'll open them slowly, so everyone has a chance to\n        pick a workshop they like.\n      </p>\n\n      <p className={styles.typo}>\n        You will be able to register to a workshop using the ID on your ticket.\n        If will be possible to switch the workshop you've picked later, if there\n        is a free seat available on another workshop.\n      </p>\n\n      <WorkshopList data={props.data} />\n    </div>\n  </Layout>\n)\n\nexport const query = graphql`\n  query WorkshopsPage {\n    allMdx {\n      edges {\n        node {\n          id\n          parent {\n            ... on File {\n              name\n              sourceInstanceName\n            }\n          }\n          frontmatter {\n            disabled\n            title\n            company\n            short_description\n            path\n            workshop_id\n            start\n            end\n            mentors\n          }\n        }\n      }\n    }\n  }\n`\n\nexport default Workshops\n","export default function(e,n){return n=n||{},new Promise(function(t,r){var s=new XMLHttpRequest;for(var o in s.open(n.method||\"get\",e,!0),n.headers)s.setRequestHeader(o,n.headers[o]);function u(){var e,n=[],t=[],r={};return s.getAllResponseHeaders().replace(/^(.*?):[^\\S\\n]*([\\s\\S]*?)$/gm,function(s,o,u){n.push(o=o.toLowerCase()),t.push([o,u]),r[o]=(e=r[o])?e+\",\"+u:u}),{ok:2==(s.status/100|0),status:s.status,statusText:s.statusText,url:s.responseURL,clone:u,text:function(){return Promise.resolve(s.responseText)},json:function(){return Promise.resolve(s.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([s.response]))},headers:{keys:function(){return n},entries:function(){return t},get:function(e){return r[e.toLowerCase()]},has:function(e){return e.toLowerCase()in r}}}}s.withCredentials=\"include\"==n.credentials,s.onload=function(){t(u())},s.onerror=r,s.send(n.body||null)})};\n//# sourceMappingURL=unfetch.mjs.map\n","'use strict';\nvar $export = require('./_export');\nvar aFunction = require('./_a-function');\nvar toObject = require('./_to-object');\nvar fails = require('./_fails');\nvar $sort = [].sort;\nvar test = [1, 2, 3];\n\n$export($export.P + $export.F * (fails(function () {\n  // IE8-\n  test.sort(undefined);\n}) || !fails(function () {\n  // V8 bug\n  test.sort(null);\n  // Old WebKit\n}) || !require('./_strict-method')($sort)), 'Array', {\n  // 22.1.3.25 Array.prototype.sort(comparefn)\n  sort: function sort(comparefn) {\n    return comparefn === undefined\n      ? $sort.call(toObject(this))\n      : $sort.call(toObject(this), aFunction(comparefn));\n  }\n});\n","'use strict';\nvar fails = require('./_fails');\n\nmodule.exports = function (method, arg) {\n  return !!method && fails(function () {\n    // eslint-disable-next-line no-useless-call\n    arg ? method.call(null, function () { /* empty */ }, 1) : method.call(null);\n  });\n};\n","module.exports = window.fetch || (window.fetch = require('unfetch').default || require('unfetch'));\n","import React from 'react'\nimport Button from '../Button'\nimport styles from './registerbutton.module.scss'\n\nexport default ({ id, disabled = false }) => (\n  <Button\n    block={true}\n    fill={true}\n    color={'red'}\n    disabled={disabled}\n    href={'https://workshop-registration.herokuapp.com/'}\n    className={styles.ticket_button}\n  >\n    {disabled ? 'Open Soon' : 'Register Now'}\n  </Button>\n)\n","import React, { useState, useEffect } from 'react'\nimport { Link } from 'gatsby'\nimport fetch from 'isomorphic-unfetch'\nimport RegisterButton from '../RegisterButton'\nimport styles from './workshoplist.module.scss'\n\nconst SEAT_API = 'https://workshop-registration.herokuapp.com/api/seats'\n//const SEAT_API = 'http://0.0.0.0:8001/api/seats'\n\nconst filterWorkshops = ({ node }) =>\n  node.parent.sourceInstanceName === 'workshops'\nconst sortWorkshops = (prev, next) => {\n  const prevDate = new Date(prev.node.frontmatter.date)\n  const nextDate = new Date(next.node.frontmatter.date)\n\n  if (prevDate > nextDate) return -1\n\n  if (prevDate < nextDate) return 1\n\n  return 0\n}\n\nconst WorkshopList = props => {\n  const [seats, setSeats] = useState({})\n\n  useEffect(() => {\n    if (Object.keys(seats).length > 0) return\n\n    fetch(SEAT_API)\n      .then(resp => resp.json())\n      .then(data => setSeats(data))\n      .catch(e => console.error(e))\n  })\n\n  const countSeats = id => {\n    return seats[id] ? seats[id].seats - seats[id].taken : 'N/A'\n  }\n\n  return (\n    <ul className={styles.workshop_list}>\n      {props.data.allMdx.edges\n        .filter(filterWorkshops)\n        .sort(sortWorkshops)\n        .map(({ node }) => (\n          <li key={node.id} className={styles.workshop_list_item}>\n            <h3 className={styles.workshop_title}>\n              <Link\n                to={`/${node.parent.sourceInstanceName}/${node.parent.name}`}\n              >\n                {node.frontmatter.title} by {node.frontmatter.company}\n              </Link>\n            </h3>\n\n            <span className={styles.workshop_date}>\n              <span className={styles.workshop_date_day}>\n                24<sup>th</sup>\n              </span>\n              <span className={styles.workshop_date_month}>Sep</span>\n              {/*\n            <span className={styles.workshop_date_time}>\n              {node.frontmatter.start} - {node.frontmatter.end}\n            </span>\n            */}\n\n              <span className={styles.seats}>\n                Available Seats\n                <span className={styles.seats_count}>\n                  {countSeats(node.frontmatter.workshop_id)}\n                </span>\n              </span>\n            </span>\n\n            <p className={styles.workshop_lead}>\n              {node.frontmatter.short_description}{' '}\n            </p>\n\n            <div className={styles.workshop_link}>\n              <Link\n                to={`/${node.parent.sourceInstanceName}/${node.parent.name}`}\n              >\n                Read more →\n              </Link>\n            </div>\n            <div className={styles.workshop_register}>\n              <RegisterButton\n                id={node.frontmatter.workshop_id}\n                disabled={node.frontmatter.disabled}\n              />\n            </div>\n          </li>\n        ))}\n    </ul>\n  )\n}\n\nexport default WorkshopList\n"],"sourceRoot":""}